# ==============================================
# TEST ENVIRONMENT CONFIGURATION
# ==============================================
# Configuration for running automated tests
# This file is committed to version control

# ==============================================
# ENVIRONMENT
# ==============================================
NODE_ENV=test

# ==============================================
# APP CONFIGURATION
# ==============================================
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ==============================================
# SECURITY & CORS (TEST)
# ==============================================
ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
CSP_ALLOWED_DOMAINS=localhost,127.0.0.1
TRUSTED_PROXY_IPS=127.0.0.1,::1

# ==============================================
# DEBUG & MONITORING (TEST)
# ==============================================
DEBUG_ENDPOINT_ENABLED=false
ERROR_REPORTING_LEVEL=error
ENABLE_PERFORMANCE_MONITORING=false
ENABLE_WEB_VITALS=false

# ==============================================
# RATE LIMITING (DISABLED FOR TESTS)
# ==============================================
RATE_LIMIT_WINDOW_MS=15000
RATE_LIMIT_MAX_REQUESTS=10000
API_RATE_LIMIT_MAX_REQUESTS=10000
IMAGE_SEARCH_RATE_LIMIT=10000

# ==============================================
# LOGGING (TEST)
# ==============================================
LOG_LEVEL=error
ENABLE_STRUCTURED_LOGGING=false
LOG_RETENTION_DAYS=1
ENABLE_AUDIT_LOGGING=false

# ==============================================
# CACHING (TEST - DISABLED)
# ==============================================
MAX_CACHE_SIZE=100
DEFAULT_CACHE_TTL=60
CACHE_WRITE_THROUGH=false
ENABLE_MEMORY_CACHE_FALLBACK=true
ENABLE_REDIS_CACHE=false
CACHE_TTL=60

# ==============================================
# DATABASE (TEST)
# ==============================================
DATABASE_POOL_MIN=1
DATABASE_POOL_MAX=5
DATABASE_SSL=false
DATABASE_POOL_SIZE=5
DATABASE_TIMEOUT=5000

# ==============================================
# FEATURE FLAGS (TEST)
# ==============================================
ENABLE_DEMO_MODE=true
DEMO_MODE_AUTO=true
ENABLE_IMAGE_SEARCH=true
ENABLE_AI_TRANSLATION=true
ENABLE_SETTINGS_SYNC=false
ENABLE_ERROR_REPORTING=false
ENABLE_PERFORMANCE_METRICS=false
ENABLE_REAL_TIME=false
ENABLE_ANALYTICS=false
ENABLE_EXPORT=true
ENABLE_A_B_TESTING=false
ENABLE_BETA_FEATURES=false
ENABLE_COLLABORATION=false
ENABLE_OFFLINE_MODE=false
ENABLE_PWA=false

# ==============================================
# ANTHROPIC (TEST - REQUIRED FOR AI TESTS)
# ==============================================
# IMPORTANT: Set real API key for integration tests to pass
# Or keep as mock for unit tests with API mocking
ANTHROPIC_API_KEY=sk-ant-test-your-test-anthropic-key-here
CLAUDE_MODEL=claude-sonnet-4-5-20250629
CLAUDE_MAX_TOKENS=4096
CLAUDE_TEMPERATURE=0.7

# ==============================================
# OPENAI (TEST - LEGACY/DEPRECATED)
# ==============================================
OPENAI_MODEL=gpt-4o-mini
OPENAI_MAX_TOKENS=100
OPENAI_TEMPERATURE=0.5
OPENAI_API_KEY=test-key-not-real

# ==============================================
# EXTERNAL SERVICES (TEST - MOCK)
# ==============================================
NEXT_PUBLIC_UNSPLASH_ACCESS_KEY=test-unsplash-key
UNSPLASH_ACCESS_KEY=test-unsplash-key
NEXT_PUBLIC_SUPABASE_URL=http://localhost:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=test-anon-key
SUPABASE_SERVICE_ROLE_KEY=test-service-key

# ==============================================
# SECURITY (TEST - GENERATED)
# ==============================================
API_SECRET_KEY=test-api-secret-key-32-bytes-hex-for-testing-only-not-secure
JWT_SECRET=test-jwt-secret-key-32-bytes-hex-for-testing-only-not-secure
SESSION_SECRET=test-session-secret-16-bytes
VALID_API_KEYS=test-key-1,test-key-2,test-key-3
DEV_API_KEY=test-dev-key

# ==============================================
# MONITORING (TEST - DISABLED)
# ==============================================
SENTRY_ENVIRONMENT=test
HEALTH_CHECK_TIMEOUT=1000
ENABLE_DEEP_HEALTH_CHECKS=false

# ==============================================
# DEPLOYMENT (TEST)
# ==============================================
ANALYZE=false
BUNDLE_ANALYZE=false
NEXT_TELEMETRY_DISABLED=1
NEXTJS_CACHE_SIZE=10
ENABLE_SOURCE_MAPS=false
ENABLE_MINIFICATION=false
ENABLE_TREE_SHAKING=false

# ==============================================
# SSL/TLS (TEST)
# ==============================================
FORCE_HTTPS=false
ENABLE_HSTS=false
HSTS_MAX_AGE=0
ENABLE_SECURITY_HEADERS=false

# ==============================================
# BACKUP (TEST - DISABLED)
# ==============================================
BACKUP_ENABLED=false

# ==============================================
# TESTING SPECIFIC
# ==============================================
ENABLE_TEST_MODE=true
TEST_API_DELAY=0

# ==============================================
# TEST SETUP INSTRUCTIONS
# ==============================================
#
# FOR INTEGRATION TESTS TO PASS, YOU MUST:
#
# 1. SET UP TEST SUPABASE PROJECT:
#    - Create separate test project at https://supabase.com/dashboard
#    - Update NEXT_PUBLIC_SUPABASE_URL with test project URL
#    - Update NEXT_PUBLIC_SUPABASE_ANON_KEY with test anon key
#    - Update SUPABASE_SERVICE_ROLE_KEY with test service role key
#    - Run migrations on test database
#
# 2. CONFIGURE ANTHROPIC API KEY:
#    - Get test API key from https://console.anthropic.com/settings/keys
#    - Update ANTHROPIC_API_KEY with real key (NOT the placeholder)
#    - OR set up API mocking for unit tests
#
# 3. OPTIONAL - UNSPLASH API:
#    - Get key from https://unsplash.com/developers
#    - Update NEXT_PUBLIC_UNSPLASH_ACCESS_KEY
#    - OR use mock responses for image search tests
#
# ==============================================
# TROUBLESHOOTING TEST FAILURES
# ==============================================
#
# Error: "fetch failed" / AuthRetryableFetchError
# → Fix: Set correct Supabase URL and keys (see step 1 above)
#
# Error: "expected 400 to be 200"
# → Fix: Set valid ANTHROPIC_API_KEY (see step 2 above)
#
# Error: JSX syntax errors in test files
# → Fix: Update vitest.config.ts or rename .ts to .tsx
#
# Error: Rate limit exceeded
# → Fix: Use test API key with higher limits or add delays
#
# ==============================================
# NOTE
# ==============================================
# This file contains test configurations with mock values.
# Tests should use these values or mock external dependencies.
# Never commit real API keys to version control.
# Create .env.test.local for real test credentials (gitignored).
